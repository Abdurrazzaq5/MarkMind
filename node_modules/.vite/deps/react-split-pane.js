import {
  require_jsx_runtime
} from "./chunk-2YVA4HRZ.js";
import {
  require_react
} from "./chunk-WUR7D6NS.js";
import {
  __toESM
} from "./chunk-G3PMV62Z.js";

// node_modules/react-split-pane/dist/index.js
var import_jsx_runtime = __toESM(require_jsx_runtime());
var import_react = __toESM(require_react());
var c = "split-pane-pane";
var u = (0, import_react.forwardRef)(function(n2, t2) {
  const { className: r2, style: i2, children: o2, defaultSize: s2, size: a2, minSize: u2, maxSize: l2, ...d2 } = n2, m2 = { position: "relative", outline: "none", overflow: "auto", flex: "none", ...i2 }, h2 = [c, r2].filter(Boolean).join(" ");
  return (0, import_jsx_runtime.jsx)("div", { ref: t2, className: h2, style: m2, "data-pane": "true", ...d2, children: o2 });
});
function l(e2, n2 = "polite") {
  const t2 = document.createElement("div");
  t2.setAttribute("role", "status"), t2.setAttribute("aria-live", n2), t2.setAttribute("aria-atomic", "true"), t2.style.position = "absolute", t2.style.left = "-10000px", t2.style.width = "1px", t2.style.height = "1px", t2.style.overflow = "hidden", t2.textContent = e2, document.body.appendChild(t2), setTimeout(() => {
    document.body.removeChild(t2);
  }, 1e3);
}
function d(e2) {
  return 1e3 > e2 ? Math.round(e2) + " pixels" : Math.round(e2 / 10) / 100 + " thousand pixels";
}
var m = "split-pane-divider";
function h(n2) {
  const { direction: t2, index: r2, isDragging: i2, disabled: o2, onMouseDown: s2, onTouchStart: a2, onTouchEnd: c2, onKeyDown: u2, className: l2, style: d2, currentSize: h2, minSize: p2, maxSize: z2, children: f2 } = n2, v2 = "horizontal" === t2 ? "vertical" : "horizontal", S2 = { ...{ flex: "none", position: "relative", userSelect: "none", touchAction: "none", ..."horizontal" === t2 ? { width: "1px", cursor: o2 ? "default" : "col-resize" } : { height: "1px", cursor: o2 ? "default" : "row-resize" }, ...i2 && { cursor: "horizontal" === t2 ? "col-resize" : "row-resize" } }, ...d2 }, y2 = [m, t2, i2 && "dragging", l2].filter(Boolean).join(" "), g2 = (function(e2, n3) {
    return `${"horizontal" === n3 ? "vertical" : "horizontal"} divider ${e2 + 1}`;
  })(r2, t2), x2 = /* @__PURE__ */ (function(e2) {
    return `Use ${"horizontal" === e2 ? "left and right arrow keys" : "up and down arrow keys"} to resize. Hold Shift for larger steps. Press Home or End to minimize or maximize.`;
  })(t2);
  return (0, import_jsx_runtime.jsx)("div", { role: "separator", "aria-orientation": v2, "aria-label": g2, "aria-valuenow": h2, "aria-valuemin": p2, "aria-valuemax": void 0 === z2 || z2 === 1 / 0 ? void 0 : z2, "aria-description": x2, tabIndex: o2 ? -1 : 0, className: y2, style: S2, onMouseDown: o2 ? void 0 : s2, onTouchStart: o2 ? void 0 : a2, onTouchEnd: o2 ? void 0 : c2, onKeyDown: o2 ? void 0 : u2, "data-divider-index": r2, children: f2 });
}
function p(e2, n2) {
  if ("number" == typeof e2) return e2;
  if (e2.endsWith("%")) {
    return parseFloat(e2) / 100 * n2;
  }
  if (e2.endsWith("px")) return parseFloat(e2);
  const t2 = parseFloat(e2);
  return isNaN(t2) ? 0 : t2;
}
function z(e2, n2, t2) {
  return Math.min(Math.max(e2, n2), t2);
}
function f(e2, n2, t2, r2, i2) {
  const o2 = [...e2], s2 = e2[n2] ?? 0, a2 = e2[n2 + 1] ?? 0, c2 = r2[n2 + 1] ?? 0, u2 = i2[n2 + 1] ?? 1 / 0;
  let l2 = z(s2 + t2, r2[n2] ?? 0, i2[n2] ?? 1 / 0), d2 = z(a2 - t2, c2, u2);
  const m2 = a2 - d2, h2 = Math.min(Math.abs(l2 - s2), Math.abs(m2));
  return t2 > 0 ? (l2 = s2 + h2, d2 = a2 - h2) : (l2 = s2 - h2, d2 = a2 + h2), o2[n2] = l2, o2[n2 + 1] = d2, o2;
}
function v(e2) {
  const { direction: n2, sizes: s2, minSizes: a2, maxSizes: c2, snapPoints: u2 = [], snapTolerance: l2 = 10, step: d2, onResizeStart: m2, onResize: h2, onResizeEnd: p2 } = e2, [z2, v2] = (0, import_react.useState)(false), [S2, y2] = (0, import_react.useState)(s2), g2 = (0, import_react.useRef)(null), x2 = (0, import_react.useRef)(null), w2 = (0, import_react.useRef)(true), E2 = (0, import_react.useRef)(S2);
  E2.current = S2;
  const b = (0, import_react.useRef)(p2);
  b.current = p2, z2 || s2 === S2 || JSON.stringify(s2) === JSON.stringify(S2) || y2(s2), (0, import_react.useEffect)(() => (w2.current = true, () => {
    w2.current = false, x2.current && (cancelAnimationFrame(x2.current), x2.current = null);
  }), []);
  const D = (0, import_react.useCallback)((e3, t2) => {
    if (!g2.current || !w2.current) return;
    const { dividerIndex: r2, startPosition: i2, startSizes: o2 } = g2.current;
    let s3 = ("horizontal" === n2 ? e3 : t2) - i2;
    d2 && (s3 = (function(e4, n3) {
      return n3 > 0 ? Math.round(e4 / n3) * n3 : e4;
    })(s3, d2));
    let m3 = f(o2, r2, s3, a2, c2);
    u2.length > 0 && (m3 = m3.map((e4) => (function(e5, n3, t3) {
      for (const r3 of n3) if (t3 >= Math.abs(e5 - r3)) return r3;
      return e5;
    })(e4, u2, l2))), y2(m3), h2 && h2(m3, { sizes: m3, source: "mouse" });
  }, [n2, d2, a2, c2, u2, l2, h2]), A = (0, import_react.useCallback)((e3) => {
    e3.preventDefault(), x2.current || (x2.current = requestAnimationFrame(() => {
      x2.current = null, w2.current && D(e3.clientX, e3.clientY);
    }));
  }, [D]), R = (0, import_react.useCallback)((e3) => {
    e3.preventDefault(), x2.current || (x2.current = requestAnimationFrame(() => {
      if (x2.current = null, w2.current) {
        const n3 = e3.touches[0];
        n3 && D(n3.clientX, n3.clientY);
      }
    }));
  }, [D]), k = (0, import_react.useCallback)(() => {
    if (!g2.current) return;
    x2.current && (cancelAnimationFrame(x2.current), x2.current = null), v2(false);
    const e3 = E2.current, n3 = b.current;
    n3 && n3(e3, { sizes: e3, source: "mouse" }), g2.current = null;
  }, []), T = (0, import_react.useCallback)((e3) => (t2) => {
    t2.preventDefault();
    g2.current = { dividerIndex: e3, startPosition: "horizontal" === n2 ? t2.clientX : t2.clientY, startSizes: S2 }, v2(true), m2 && m2({ sizes: S2, source: "mouse", originalEvent: t2.nativeEvent });
  }, [n2, S2, m2]), M = (0, import_react.useCallback)((e3) => (t2) => {
    const r2 = t2.touches[0];
    if (!r2) return;
    g2.current = { dividerIndex: e3, startPosition: "horizontal" === n2 ? r2.clientX : r2.clientY, startSizes: S2 }, v2(true), m2 && m2({ sizes: S2, source: "touch", originalEvent: t2.nativeEvent });
  }, [n2, S2, m2]), N = (0, import_react.useCallback)((e3) => {
    e3.preventDefault(), k();
  }, [k]);
  return (0, import_react.useEffect)(() => {
    if (z2) return document.addEventListener("mousemove", A), document.addEventListener("mouseup", k), document.addEventListener("touchmove", R, { passive: false }), document.addEventListener("touchend", k), () => {
      document.removeEventListener("mousemove", A), document.removeEventListener("mouseup", k), document.removeEventListener("touchmove", R), document.removeEventListener("touchend", k);
    };
  }, [z2, A, k, R]), { isDragging: z2, currentSizes: S2, handleMouseDown: T, handleTouchStart: M, handleTouchEnd: N };
}
var S = 10;
var y = 50;
function g(e2) {
  const { direction: n2, sizes: t2, minSizes: i2, maxSizes: s2, step: a2 = S, largeStep: c2 = y, onResize: u2, onResizeEnd: m2 } = e2, h2 = (0, import_react.useRef)(null);
  return { handleKeyDown: (0, import_react.useCallback)((e3) => (r2) => {
    if (!("horizontal" === n2 ? ["ArrowLeft", "ArrowRight"] : ["ArrowUp", "ArrowDown"]).includes(r2.key) && "Home" !== r2.key && "End" !== r2.key && "Escape" !== r2.key) return;
    if (r2.preventDefault(), "Escape" === r2.key) {
      if (h2.current) {
        const e4 = h2.current;
        h2.current = null, u2 && u2(e4, { sizes: e4, source: "keyboard", originalEvent: r2.nativeEvent }), m2 && m2(e4, { sizes: e4, source: "keyboard", originalEvent: r2.nativeEvent }), l("Pane sizes restored");
      }
      return;
    }
    null === h2.current && (h2.current = [...t2]);
    let o2 = 0, p2 = [...t2], v2 = "arrow";
    switch (r2.key) {
      case "ArrowLeft":
      case "ArrowUp":
        o2 = -(r2.shiftKey ? c2 : a2);
        break;
      case "ArrowRight":
      case "ArrowDown":
        o2 = r2.shiftKey ? c2 : a2;
        break;
      case "Home": {
        v2 = "home";
        const n3 = e3 + 1, r3 = i2[e3] ?? 0, o3 = (t2[e3] ?? 0) + (t2[n3] ?? 0);
        p2[e3] = r3, p2[n3] = o3 - r3;
        break;
      }
      case "End": {
        v2 = "end";
        const n3 = e3, r3 = e3 + 1, o3 = (t2[n3] ?? 0) + (t2[r3] ?? 0);
        p2[n3] = Math.min(s2[n3] ?? 1 / 0, o3 - (i2[r3] ?? 0)), p2[r3] = o3 - p2[n3];
        break;
      }
    }
    if (0 !== o2 && (p2 = f(t2, e3, o2, i2, s2)), p2 = p2.map((e4, n3) => z(e4, i2[n3] ?? 0, s2[n3] ?? 1 / 0)), u2 && u2(p2, { sizes: p2, source: "keyboard", originalEvent: r2.nativeEvent }), m2 && m2(p2, { sizes: p2, source: "keyboard", originalEvent: r2.nativeEvent }), "home" === v2) l(`Pane ${e3 + 1} minimized to ${d(p2[e3] ?? 0)}`);
    else if ("end" === v2) l(`Pane ${e3 + 1} maximized to ${d(p2[e3] ?? 0)}`);
    else {
      const n3 = o2 > 0 ? e3 : e3 + 1;
      l(`Pane ${n3 + 1} resized to ${d(p2[n3] ?? 0)}`);
    }
  }, [n2, t2, i2, s2, a2, c2, u2, m2]) };
}
var x = "split-pane";
function w(n2) {
  const { direction: c2 = "horizontal", resizable: l2 = true, snapPoints: d2, snapTolerance: m2 = 10, step: z2, onResizeStart: f2, onResize: S2, onResizeEnd: y2, className: w2, style: E2, divider: b, dividerStyle: D, dividerClassName: A, children: R } = n2, k = (0, import_react.useRef)(null), [T, M] = (0, import_react.useState)(0), N = (0, import_react.useRef)(0), P = (0, import_react.useMemo)(() => import_react.Children.toArray(R).filter((e2) => "object" == typeof e2 && null !== e2 && "props" in e2).map((e2) => ({ props: e2.props, size: e2.props.size, defaultSize: e2.props.defaultSize, minSize: e2.props.minSize ?? 0, maxSize: e2.props.maxSize ?? 1 / 0 })), [R]), L = P.length, $ = (0, import_react.useRef)(false);
  2 > L && !$.current && ($.current = true, console.warn(`SplitPane requires at least 2 Pane children. Received ${L}.`));
  const { minSizes: F, maxSizes: K } = (0, import_react.useMemo)(() => {
    if (0 === T) return { minSizes: Array(L).fill(0), maxSizes: Array(L).fill(1 / 0) };
    const e2 = [], n3 = [];
    return P.forEach((t2) => {
      e2.push(p(t2.minSize, T)), n3.push(t2.maxSize === 1 / 0 ? 1 / 0 : p(t2.maxSize, T));
    }), { minSizes: e2, maxSizes: n3 };
  }, [T, L, P]), I = (0, import_react.useCallback)((e2) => {
    if (0 === e2) return Array(L).fill(0);
    const n3 = P.map((n4) => {
      const t3 = n4.size ?? n4.defaultSize;
      return void 0 !== t3 ? p(t3, e2) : null;
    }), t2 = n3.reduce((e3, n4) => e3 + (n4 ?? 0), 0), r2 = n3.filter((e3) => null === e3).length, i2 = r2 > 0 ? (e2 - t2) / r2 : 0;
    return n3.map((e3) => null === e3 ? i2 : e3);
  }, [L, P]), [j, O] = (0, import_react.useState)(() => I(T)), C = (0, import_react.useCallback)((e2) => {
    const n3 = N.current;
    N.current = e2, 0 !== e2 && O((t2) => t2.every((e3) => 0 === e3) || t2.length !== L ? I(e2) : n3 > 0 && n3 !== e2 ? (function(e3, n4) {
      const t3 = e3.reduce((e4, n5) => e4 + n5, 0);
      if (0 === t3) {
        const t4 = n4 / e3.length;
        return e3.map(() => t4);
      }
      return e3.map((e4) => e4 / t3 * n4);
    })(t2, e2) : 0 === n3 ? I(e2) : t2);
  }, [L, I]);
  (0, import_react.useEffect)(() => {
    const e2 = k.current;
    if (!e2) return;
    const n3 = new ResizeObserver((e3) => {
      const n4 = e3[0];
      n4 && ((e4) => {
        const n5 = "horizontal" === c2 ? e4.width : e4.height;
        n5 > 0 && (M(n5), C(n5));
      })(n4.contentRect);
    });
    return n3.observe(e2), () => {
      n3.disconnect();
    };
  }, [c2, C]);
  const H = (0, import_react.useCallback)((e2, n3) => {
    O(e2), S2?.(e2, n3);
  }, [S2]), { isDragging: J, currentSizes: X, handleMouseDown: Y, handleTouchStart: q, handleTouchEnd: B } = v({ direction: c2, sizes: j, minSizes: F, maxSizes: K, snapPoints: d2, snapTolerance: m2, step: z2, onResizeStart: f2, onResize: H, onResizeEnd: y2 }), { handleKeyDown: U } = g({ direction: c2, sizes: X, minSizes: F, maxSizes: K, step: z2, onResize: H, onResizeEnd: y2 }), W = { display: "flex", flexDirection: "horizontal" === c2 ? "row" : "column", height: "100%", width: "100%", overflow: "hidden", position: "relative", ...E2 }, G = [x, c2, w2].filter(Boolean).join(" ");
  return (0, import_jsx_runtime.jsx)("div", { ref: k, className: G, style: W, children: T > 0 && (() => {
    if (2 > L) return null;
    const n3 = [];
    return P.forEach((t2, r2) => {
      const i2 = X[r2] ?? 0, o2 = { ..."horizontal" === c2 ? { width: i2 + "px", height: "100%" } : { height: i2 + "px", width: "100%" }, ...t2.props.style };
      if (n3.push((0, import_jsx_runtime.jsx)(u, { ...t2.props, style: o2, children: t2.props.children }, "pane-" + r2)), L - 1 > r2) {
        const t3 = F[r2], o3 = K[r2];
        n3.push((0, import_jsx_runtime.jsx)(b ?? h, { direction: c2, index: r2, isDragging: J, disabled: !l2, onMouseDown: Y(r2), onTouchStart: q(r2), onTouchEnd: B, onKeyDown: U(r2), className: A, style: D, currentSize: i2, minSize: t3, maxSize: o3 === 1 / 0 ? void 0 : o3 }, "divider-" + r2));
      }
    }), n3;
  })() });
}
function E(e2) {
  const { key: n2, storage: r2 = localStorage, debounce: o2 = 300 } = e2, [s2, a2] = (0, import_react.useState)(() => {
    try {
      const e3 = r2.getItem(n2);
      return e3 ? JSON.parse(e3) : [];
    } catch {
      return [];
    }
  });
  return (0, import_react.useEffect)(() => {
    if (0 === s2.length) return;
    const e3 = setTimeout(() => {
      try {
        r2.setItem(n2, JSON.stringify(s2));
      } catch (e4) {
        console.warn("Failed to persist pane sizes:", e4);
      }
    }, o2);
    return () => clearTimeout(e3);
  }, [s2, n2, r2, o2]), [s2, a2];
}
export {
  h as Divider,
  u as Pane,
  w as SplitPane,
  g as useKeyboardResize,
  E as usePersistence,
  v as useResizer
};
//# sourceMappingURL=react-split-pane.js.map
